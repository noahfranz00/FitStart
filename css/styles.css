*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; min-width:0; }
:root {
  --black: #0A0A0A; --dark: #111; --card: #161616; --border: rgba(255,255,255,0.07);
  --border2: rgba(255,255,255,0.13); --white: #F2F0EB; --off: #E2DFD8; --dim: #B8B4AE;
  --green: #4ADE80; --green-dim: rgba(74,222,128,0.12);
  --orange: #FB923C; --orange-dim: rgba(251,146,60,0.12);
  --red: #F43F5E; --red-dim: rgba(244,63,94,0.12);
  --blue: #60A5FA; --tier-color: var(--green); --tier-dim: var(--green-dim);
}
body.intermediate { --tier-color: var(--orange); --tier-dim: var(--orange-dim); }
body.advanced { --tier-color: var(--red); --tier-dim: var(--red-dim); }
html { overflow-x:hidden; max-width:100vw; padding-top: env(safe-area-inset-top); }
body { font-family: 'Inter', 'Syne', sans-serif; background: var(--black); color: var(--white); min-height: 100vh; overflow-x: hidden; max-width:100vw; }
body::before {
  content: ''; position: fixed; inset: 0; pointer-events: none; z-index: 0;
  background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none'%3E%3Cg fill='%23ffffff' fill-opacity='0.015'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
}
* { position: relative; z-index: 1; }
@keyframes fadeUp { from { opacity:0; transform:translateY(14px); } to { opacity:1; transform:none; } }
@keyframes barPulse { 0%,100% { transform:scaleY(0.5); opacity:0.4; } 50% { transform:scaleY(1); opacity:1; } }
@keyframes spin { to { transform:rotate(360deg); } }
@keyframes pulse { 0%,100% { opacity:1; } 50% { opacity:0.5; } }

/* ── NAV ── */
nav { display:flex; justify-content:space-between; align-items:center; padding:20px 48px; border-bottom:1px solid var(--border); background:rgba(10,10,10,0.92); backdrop-filter:blur(10px); position:sticky; top:0; z-index:200; width:100%; box-sizing:border-box; }
.logo { font-family:'Bebas Neue',sans-serif; font-size:1.9rem; letter-spacing:2px; }
.logo-dot { color:var(--green); transition:color 0.4s; }
.nav-right { display:flex; align-items:center; gap:14px; }
.nav-pill { font-size:0.68rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--dim); border:1px solid var(--border); border-radius:100px; padding:6px 14px; }
.nav-cta { padding:9px 22px; border-radius:10px; border:none; background:var(--green); color:var(--black); font-family:'Bebas Neue',sans-serif; font-size:0.95rem; letter-spacing:1.5px; cursor:pointer; transition:all 0.2s; }
.nav-cta:hover { opacity:0.9; }
.streak-pill { display:flex; align-items:center; gap:6px; background:var(--orange-dim); border:1px solid rgba(251,146,60,0.25); border-radius:100px; padding:7px 16px; font-size:0.75rem; font-weight:700; color:var(--orange); }
.user-pill { display:flex; align-items:center; gap:8px; background:var(--card); border:1px solid var(--border); border-radius:100px; padding:6px 14px 6px 6px; font-size:0.78rem; color:var(--off); cursor:pointer; }
.avatar { width:26px; height:26px; border-radius:50%; background:linear-gradient(135deg,var(--green),var(--blue)); display:flex; align-items:center; justify-content:center; font-size:0.65rem; font-weight:700; color:var(--black); flex-shrink:0; }

/* ── SCREENS ── */
.screen { display:none; }
.screen.active { display:block; }

/* ── ONBOARDING ── */
#screen-onboard .hero { padding:60px 48px 40px; max-width:1100px; margin:0 auto; box-sizing:border-box; }
.hero-eyebrow { display:flex; align-items:center; gap:12px; font-size:0.72rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); margin-bottom:20px; }
.eyebrow-line { width:32px; height:1px; background:var(--dim); }
#ob-headline { font-family:'Bebas Neue',sans-serif; font-size:clamp(3.5rem,8vw,6rem); line-height:0.92; letter-spacing:1px; margin-bottom:20px; }
.line-accent { color:var(--tier-color); transition:color 0.4s; display:block; }
.hero-sub { font-size:1rem; color:var(--off); max-width:540px; line-height:1.7; font-weight:400; margin-bottom:32px; }
.tier-selector { display:flex; gap:10px; flex-wrap:wrap; }
.tier-btn { flex:1; min-width:160px; padding:16px 20px; background:var(--card); border:1px solid var(--border); border-radius:14px; cursor:pointer; text-align:left; transition:all 0.25s; color:var(--white); }
.tier-btn:hover { border-color:var(--border2); }
.tier-btn.active { border-color:var(--tier-color); background:var(--tier-dim); }
.tier-label { font-family:'Bebas Neue',sans-serif; font-size:1.15rem; letter-spacing:1px; }
.tier-btn.active .tier-label { color:var(--tier-color); }
.tier-desc { font-size:0.72rem; color:var(--dim); margin-top:4px; }
.tier-dots { display:flex; gap:4px; margin-top:10px; }
.tier-dot { width:6px; height:6px; border-radius:50%; background:var(--border2); }
.tier-btn.active .tier-dot { background:var(--tier-color); }

.main-layout { display:grid; grid-template-columns:1fr 300px; gap:24px; max-width:1100px; margin:0 auto; padding:0 48px 60px; }
.form-card { background:var(--card); border:1px solid var(--border); border-radius:20px; padding:32px; }
.form-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:24px; }
.form-title { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:1px; }
.tier-badge { font-size:0.65rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--green); background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); padding:5px 12px; border-radius:6px; }
.tier-badge.intermediate { color:var(--orange); background:var(--orange-dim); border-color:rgba(251,146,60,0.2); }
.tier-badge.advanced { color:var(--red); background:var(--red-dim); border-color:rgba(244,63,94,0.2); }
.form-section-label { font-size:0.6rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); margin-bottom:12px; margin-top:20px; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.form-group { display:flex; flex-direction:column; gap:6px; }
.form-group label { font-size:0.65rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--dim); }
.form-group input, .form-group select { padding:10px 13px; background:var(--dark); border:1px solid var(--border); border-radius:10px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; transition:border-color 0.2s; }
.form-group input:focus, .form-group select:focus { border-color:var(--tier-color); }
.form-group input::placeholder { color:var(--dim); }
.form-group select option { background:var(--dark); }

/* Split selector */
.split-selector { display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:6px; }
.split-btn { padding:12px 14px; background:var(--dark); border:1px solid var(--border); border-radius:10px; cursor:pointer; text-align:left; transition:all 0.2s; }
.split-btn:hover { border-color:var(--border2); }
.split-btn.active { border-color:var(--tier-color); background:var(--tier-dim); }
.split-btn-title { font-size:0.82rem; font-weight:700; color:var(--off); }
.split-btn.active .split-btn-title { color:var(--tier-color); }
.split-btn-desc { font-size:0.68rem; color:var(--dim); margin-top:3px; }

/* Day picker */
.day-picker { display:flex; gap:6px; flex-wrap:wrap; margin-top:6px; }
.day-pill { padding:8px 14px; border-radius:8px; border:1px solid var(--border); background:var(--dark); font-family:'DM Mono',monospace; font-size:0.78rem; color:var(--dim); cursor:pointer; transition:all 0.18s; user-select:none; }
.day-pill.active { border-color:var(--tier-color); background:var(--tier-dim); color:var(--tier-color); font-weight:500; }

/* Timeline selector */
.timeline-selector { display:flex; gap:8px; flex-wrap:wrap; margin-top:6px; }
.tl-btn { padding:10px 18px; border-radius:9px; border:1px solid var(--border); background:var(--dark); font-family:'DM Mono',monospace; font-size:0.8rem; color:var(--dim); cursor:pointer; transition:all 0.2s; }
.tl-btn:hover { border-color:var(--border2); color:var(--off); }
.tl-btn.active { border-color:var(--tier-color); background:var(--tier-dim); color:var(--tier-color); font-weight:500; }

.btn-generate { width:100%; margin-top:24px; padding:16px; background:var(--tier-color); color:var(--black); border:none; border-radius:12px; font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:2px; cursor:pointer; transition:all 0.2s; }
.btn-generate:hover { opacity:0.9; transform:translateY(-1px); }
.btn-generate:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
.price-note { text-align:center; font-size:0.72rem; color:var(--dim); margin-top:10px; font-family:'DM Mono',monospace; }

/* Sidebar */
.sidebar-info { display:flex; flex-direction:column; gap:14px; }
.info-card { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:22px; }
.info-card-label { font-size:0.62rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); margin-bottom:14px; }
.feature-item { display:flex; gap:10px; align-items:flex-start; margin-bottom:10px; }
.feature-dot { width:6px; height:6px; border-radius:50%; background:var(--tier-color); flex-shrink:0; margin-top:6px; }
.feature-text { font-size:0.82rem; color:var(--off); line-height:1.5; }

/* Loading */
.loading-wrap { display:none; text-align:center; padding:80px 48px; }
.loader { display:flex; align-items:center; justify-content:center; gap:6px; margin-bottom:20px; }
.loader-bar { width:4px; height:32px; border-radius:2px; background:var(--tier-color); animation:barPulse 0.8s ease-in-out infinite; }
.loader-bar:nth-child(2) { animation-delay:0.1s; height:48px; }
.loader-bar:nth-child(3) { animation-delay:0.2s; height:24px; }
.loader-bar:nth-child(4) { animation-delay:0.3s; height:40px; }
.loader-bar:nth-child(5) { animation-delay:0.4s; height:20px; }
.loading-wrap p { color:var(--off); font-size:0.95rem; }
.loading-wrap small { color:var(--dim); font-size:0.75rem; font-family:'DM Mono',monospace; margin-top:8px; display:block; }

/* Results */
#results-section { display:none; max-width:1100px; margin:0 auto; padding:0 48px 60px; overflow-x:hidden; }
.results-banner { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:24px; padding-bottom:20px; border-bottom:1px solid var(--border); animation:fadeUp 0.3s ease forwards; flex-wrap:wrap; gap:12px; }
.results-banner h2 { font-family:'Bebas Neue',sans-serif; font-size:2.2rem; letter-spacing:1px; margin-bottom:4px; }
.results-banner p { font-size:0.88rem; color:var(--off); }
.results-tier-badge { font-family:'Bebas Neue',sans-serif; font-size:0.95rem; letter-spacing:2px; padding:8px 16px; border-radius:8px; background:var(--green-dim); color:var(--green); border:1px solid rgba(74,222,128,0.2); }
.results-tier-badge.intermediate { background:var(--orange-dim); color:var(--orange); border-color:rgba(251,146,60,0.2); }
.results-tier-badge.advanced { background:var(--red-dim); color:var(--red); border-color:rgba(244,63,94,0.2); }
.results-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-bottom:16px; }
.r-card { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:26px; animation:fadeUp 0.35s ease forwards; opacity:0; overflow:hidden; word-break:break-word; }
.r-card:nth-child(2) { animation-delay:0.08s; }
.r-card:nth-child(3) { animation-delay:0.16s; }
.r-card-icon { font-size:1.6rem; margin-bottom:12px; }
.r-card h3 { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:1.5px; color:var(--white); margin-bottom:12px; }
.r-card p { font-size:0.88rem; color:var(--off); line-height:1.6; margin-bottom:5px; }
.r-card strong { color:var(--white); font-weight:700; }
.r-card ul { margin-left:14px; margin-top:8px; }
.r-card li { font-size:0.86rem; color:var(--off); line-height:1.7; }
.week-card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:28px; margin-bottom:16px; animation:fadeUp 0.4s 0.2s ease forwards; opacity:0; }
.week-card h3 { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1.5px; margin-bottom:18px; }
.day-row { display:grid; grid-template-columns:100px 1fr auto; gap:16px; align-items:center; padding:13px 0; border-bottom:1px solid var(--border); }
.day-row:last-child { border-bottom:none; }
.day-name { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); text-transform:uppercase; letter-spacing:1px; }
.day-workout { font-size:0.83rem; color:var(--off); line-height:1.5; }
.day-tag { font-size:0.62rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; padding:4px 10px; border-radius:6px; white-space:nowrap; }
.day-tag.workout { background:var(--green-dim); color:var(--green); }
.day-tag.workout.intermediate { background:var(--orange-dim); color:var(--orange); }
.day-tag.workout.advanced { background:var(--red-dim); color:var(--red); }
.day-tag.rest { background:rgba(255,255,255,0.04); color:var(--dim); }
.cta-into-app { background:linear-gradient(135deg,#111,#1a1a1a); border:1px solid var(--border); border-radius:20px; padding:48px; text-align:center; animation:fadeUp 0.4s 0.35s ease forwards; opacity:0; position:relative; overflow:hidden; }
.cta-into-app::before { content:''; position:absolute; top:-60px; left:50%; transform:translateX(-50%); width:300px; height:300px; background:radial-gradient(circle,rgba(74,222,128,0.08),transparent 70%); pointer-events:none; }
body.intermediate .cta-into-app::before { background:radial-gradient(circle,rgba(251,146,60,0.08),transparent 70%); }
body.advanced .cta-into-app::before { background:radial-gradient(circle,rgba(244,63,94,0.08),transparent 70%); }
.cta-into-app h3 { font-family:'Bebas Neue',sans-serif; font-size:2.5rem; letter-spacing:1px; margin-bottom:8px; }
.cta-into-app p { font-size:0.9rem; color:var(--off); margin-bottom:28px; }
.btn-enter-app { display:inline-flex; align-items:center; gap:10px; padding:18px 44px; border-radius:12px; border:none; background:var(--tier-color); color:var(--black); font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:2px; cursor:pointer; transition:all 0.2s; }
.btn-enter-app:hover { opacity:0.9; transform:translateY(-2px); }
.cta-fine { margin-top:14px; font-size:0.72rem; color:var(--dim); font-family:'DM Mono',monospace; }

/* ── SIGNUP SCREEN ── */
#screen-signup { display:none; }
#screen-signup.active { display:block; }
.signup-wrap { max-width:980px; margin:0 auto; padding:48px 48px 80px; display:grid; grid-template-columns:1fr 420px; gap:40px; align-items:start; }
.signup-left { padding-top:8px; }
.signup-eyebrow { font-size:0.65rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--tier-color); display:flex; align-items:center; gap:10px; margin-bottom:18px; }
.signup-eyebrow-line { width:24px; height:1px; background:var(--tier-color); }
.signup-left h2 { font-family:'Bebas Neue',sans-serif; font-size:clamp(2.8rem,5vw,4.2rem); letter-spacing:1px; line-height:0.95; margin-bottom:16px; }
.signup-left h2 span { color:var(--tier-color); }
.signup-tagline { font-size:0.9rem; color:var(--off); line-height:1.7; margin-bottom:28px; max-width:420px; }
.plan-summary { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:22px; margin-bottom:24px; }
.ps-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:14px; }
.ps-label { font-size:0.6rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); }
.ps-tier-badge { font-size:0.62rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--tier-color); background:var(--tier-dim); padding:3px 10px; border-radius:5px; }
.ps-plan-name { font-family:'Bebas Neue',sans-serif; font-size:1.5rem; letter-spacing:1px; margin-bottom:4px; }
.ps-tagline { font-size:0.78rem; color:var(--dim); margin-bottom:14px; font-style:italic; }
.ps-stats { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
.ps-stat { background:var(--dark); border:1px solid var(--border); border-radius:9px; padding:10px 13px; }
.ps-stat-val { font-family:'DM Mono',monospace; font-size:0.85rem; font-weight:500; }
.ps-stat-label { font-size:0.6rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--dim); margin-top:2px; }
.included-list { display:flex; flex-direction:column; gap:8px; }
.included-item { display:flex; align-items:center; gap:10px; font-size:0.82rem; color:var(--off); }
.included-check { width:18px; height:18px; border-radius:5px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.25); display:flex; align-items:center; justify-content:center; font-size:0.6rem; color:var(--green); flex-shrink:0; }
.signup-card { background:var(--card); border:1px solid var(--border2); border-radius:22px; padding:32px; position:sticky; top:90px; }
.trial-badge { display:flex; align-items:center; justify-content:center; gap:8px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); border-radius:10px; padding:12px; margin-bottom:24px; font-size:0.8rem; font-weight:700; color:var(--green); }
.signup-form-title { font-family:'Bebas Neue',sans-serif; font-size:1.6rem; letter-spacing:1px; margin-bottom:4px; }
.signup-form-sub { font-size:0.75rem; color:var(--dim); font-family:'DM Mono',monospace; margin-bottom:22px; }
.sf-group { display:flex; flex-direction:column; gap:6px; margin-bottom:13px; }
.sf-label { font-size:0.6rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--dim); }
.sf-input { padding:12px 14px; background:var(--dark); border:1px solid var(--border); border-radius:11px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; transition:border-color 0.2s; width:100%; }
.sf-input:focus { border-color:var(--green); }
.sf-input::placeholder { color:var(--dim); }
.sf-row { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-bottom:13px; }
.pw-strength { display:flex; gap:4px; margin-top:6px; }
.pw-bar { flex:1; height:3px; border-radius:2px; background:var(--border); transition:background 0.2s; }
.pw-bar.weak { background:var(--red); } .pw-bar.ok { background:var(--orange); } .pw-bar.strong { background:var(--green); }
.trial-breakdown { background:var(--dark); border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:20px; }
.tb-row { display:flex; justify-content:space-between; align-items:center; padding:7px 0; border-bottom:1px solid var(--border); font-size:0.8rem; }
.tb-row:last-child { border-bottom:none; }
.tb-label { color:var(--dim); }
.tb-val { color:var(--white); font-weight:600; font-family:'DM Mono',monospace; }
.tb-val.free { color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:1px; }
.tb-val.after { color:var(--off); font-size:0.75rem; }
.btn-start-trial { width:100%; padding:17px; background:var(--green); color:var(--black); border:none; border-radius:13px; font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:2px; cursor:pointer; transition:all 0.2s; display:flex; align-items:center; justify-content:center; gap:8px; }
.btn-start-trial:hover { opacity:0.9; transform:translateY(-2px); }
.btn-start-trial:disabled { opacity:0.5; cursor:not-allowed; transform:none; }
body.intermediate .btn-start-trial { background:var(--orange); }
body.advanced .btn-start-trial { background:var(--red); }
.signup-fine { text-align:center; font-size:0.67rem; color:var(--dim); font-family:'DM Mono',monospace; margin-top:12px; line-height:1.6; }
.signup-login { text-align:center; margin-top:14px; font-size:0.78rem; color:var(--dim); }
.signup-login a { color:var(--off); text-decoration:underline; cursor:pointer; }
.spinner { width:16px; height:16px; border-radius:50%; border:2px solid rgba(0,0,0,0.25); border-top-color:rgba(0,0,0,0.8); animation:spin 0.6s linear infinite; }

/* ── DASHBOARD ── */
#screen-dash { display:none; }
#screen-dash.active { display:flex !important; flex-direction:column; min-height:100vh; }
.shell { display:flex; height:calc(100vh - 69px); }
.sidebar-nav { width:220px; flex-shrink:0; background:var(--dark); border-right:1px solid var(--border); padding:28px 12px; display:flex; flex-direction:column; gap:2px; overflow-y:auto; }
.sb-label { font-size:0.62rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); padding:10px 12px 6px; }
.sb-btn { display:flex; align-items:center; gap:10px; padding:11px 14px; border-radius:10px; font-size:0.83rem; font-weight:500; color:var(--off); cursor:pointer; transition:all 0.18s; background:none; border:none; width:100%; text-align:left; font-family:'Syne',sans-serif; }
.sb-btn:hover { background:rgba(255,255,255,0.04); color:var(--white); }
.sb-btn.active { background:var(--green-dim); color:var(--green); border:1px solid rgba(74,222,128,0.15); }
.sb-icon { font-size:1rem; width:20px; text-align:center; flex-shrink:0; }
.sb-badge { margin-left:auto; font-family:'DM Mono',monospace; font-size:0.62rem; background:rgba(255,255,255,0.05); color:var(--dim); padding:2px 7px; border-radius:100px; }
.sb-btn.active .sb-badge { background:rgba(74,222,128,0.15); color:var(--green); }
.main-content { flex:1; overflow-y:auto; padding:36px 40px; display:flex; flex-direction:column; min-height:0; }
.view { display:none; animation:fadeUp 0.3s ease; }
.view.active { display:block; }
#view-coach.active { display:flex !important; flex-direction:column; height:100%; min-height:0; }
/* 
  Mobile coach layout: position:fixed overlay that fills the exact space between 
  the app's nav bar and the tab bar. Uses dvh to handle Safari's dynamic viewport.
*/
@media(max-width:768px) {
  .main-content.coach-active {
    /* When coach is active, make main-content invisible — the coach overlay takes over */
    padding: 0 !important;
    overflow: hidden !important;
  }
  .main-content.coach-active #view-coach.active {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    z-index: 100 !important; /* below nav(200) and tab bar(9999) */
    background: var(--black) !important;
    display: flex !important;
    flex-direction: column !important;
    /* Padding accounts for nav top and tab bar bottom */
    padding-top: 48px !important;
    padding-bottom: calc(60px + env(safe-area-inset-bottom, 6px)) !important;
  }
  .main-content.coach-active .coach-chat-container {
    flex: 1 !important;
    min-height: 0 !important;
    border: none !important;
    border-radius: 0 !important;
    display: flex !important;
    flex-direction: column !important;
    background: var(--black) !important;
  }
  .main-content.coach-active .coach-messages {
    flex: 1 !important;
    min-height: 0 !important;
    overflow-y: auto !important;
    -webkit-overflow-scrolling: touch !important;
  }
  .main-content.coach-active .coach-input-bar {
    flex-shrink: 0 !important;
    background: var(--black) !important;
  }
  /* Hide the AI COACH header row on mobile to save space */
  .main-content.coach-active #view-coach > div:first-child {
    padding: 8px 14px 6px !important;
  }
}
.page-header { margin-bottom:28px; }
.page-title { font-family:'Bebas Neue',sans-serif; font-size:2rem; letter-spacing:1px; line-height:1; }
.page-sub { font-family:'Inter',sans-serif; font-size:0.82rem; color:var(--off); margin-top:5px; }
.card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:24px; }
.card-label { font-size:0.62rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); margin-bottom:10px; }
.today-grid { display:grid; grid-template-columns:1fr 1fr; gap:14px; margin-bottom:16px; }
.stat-card { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; }
.sc-val { font-family:'Bebas Neue',sans-serif; font-size:2.2rem; letter-spacing:1px; color:var(--green); line-height:1; margin-bottom:3px; transition:color 0.3s; }
.sc-val.over { color:var(--red); }
.sc-sub { font-family:'DM Mono',monospace; font-size:0.75rem; color:var(--off); }
.prog-bar { height:3px; background:rgba(255,255,255,0.06); border-radius:2px; margin-top:10px; overflow:hidden; }
.prog-fill { height:100%; border-radius:2px; background:var(--green); transition:width 0.4s ease, background 0.3s; }
.prog-fill.over { background:var(--red); }
.workout-card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:24px; margin-bottom:16px; overflow:visible; }
.wc-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:20px; }
.wc-badge { display:inline-flex; align-items:center; gap:6px; font-size:0.65rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--green); background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); padding:4px 10px; border-radius:6px; margin-bottom:6px; width:fit-content; }
.wc-name { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:1px; }
.btn-primary { padding:11px 24px; background:var(--green); color:var(--black); border:none; border-radius:10px; font-family:'Bebas Neue',sans-serif; font-size:0.95rem; letter-spacing:2px; cursor:pointer; transition:all 0.2s; flex-shrink:0; }
.btn-primary:hover { opacity:0.9; transform:translateY(-1px); }
.btn-primary.done { background:var(--green-dim); color:var(--green); border:1px solid rgba(74,222,128,0.3); }
.ex-list { display:flex; flex-direction:column; gap:8px; overflow:visible; }
.ex-row { display:grid; grid-template-columns:30px 1fr auto; align-items:center; gap:12px; padding:11px 14px; background:var(--dark); border-radius:10px; border:1px solid var(--border); cursor:pointer; transition:all 0.18s; position:relative; overflow:visible !important; }
.ex-row:hover { border-color:var(--border2); }
.ex-row.done { border-color:rgba(74,222,128,0.2); background:rgba(74,222,128,0.04); }
.ex-row-dots { width:28px; height:28px; border-radius:6px; border:none; background:transparent; color:var(--dim); cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:1.2rem; padding:0; flex-shrink:0; line-height:1; }
.ex-row-dots:hover { color:var(--white); background:rgba(255,255,255,0.08); }
.ex-row-dots:active { background:rgba(255,255,255,0.12); }
.ex-row-dots-wrap { display:contents; }
.ex-row-dropdown { display:none; } /* not used — portal renders on body */
.ex-row-dropdown span { display:block; padding:10px 14px; font-size:0.82rem; color:var(--off); cursor:pointer; }
.ex-row-dropdown span:hover { background:rgba(255,255,255,0.06); color:var(--white); }
.ex-row-dropdown span.delete:hover { color:var(--red); }
.ex-name { font-size:0.87rem; font-weight:500; color:var(--off); }
.ex-row.done .ex-name { color:var(--green); }
.ex-detail { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); }
.ex-check { width:22px; height:22px; border-radius:6px; border:1.5px solid var(--border2); display:flex; align-items:center; justify-content:center; font-size:0.7rem; transition:all 0.2s; }
.ex-row.done .ex-check { background:var(--green); border-color:var(--green); color:var(--black); }
.log-toggle-card { background:var(--card); border:1px solid var(--border); border-radius:18px; overflow:hidden; }
.log-toggle-header { display:flex; align-items:center; justify-content:space-between; padding:18px 24px; cursor:pointer; transition:background 0.2s; }
.log-toggle-header:hover { background:rgba(255,255,255,0.02); }
.log-toggle-title { display:flex; align-items:center; gap:10px; font-size:0.85rem; font-weight:700; color:var(--green); }
.plus-icon { width:26px; height:26px; border-radius:7px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.25); display:flex; align-items:center; justify-content:center; font-size:1rem; color:var(--green); }
.log-form { padding:0 24px 20px; display:none; flex-direction:column; gap:12px; }
.log-form.open { display:flex; }
.lf-name input { width:100%; padding:11px 14px; background:var(--dark); border:1px solid var(--border); border-radius:10px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; }
.lf-name input::placeholder { color:var(--dim); }
.lf-macros { display:grid; grid-template-columns:repeat(4,1fr); gap:10px; }
.lf-field { display:flex; flex-direction:column; gap:5px; }
.lf-label { font-size:0.6rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; text-align:center; color:var(--dim); }
.lf-label.cal { color:var(--off); } .lf-label.p { color:var(--green); } .lf-label.c { color:var(--blue); } .lf-label.f { color:var(--orange); }
.lf-field input { padding:10px 6px; background:var(--dark); border:1px solid var(--border); border-radius:10px; font-family:'DM Mono',monospace; font-size:0.95rem; color:var(--white); text-align:center; outline:none; width:100%; }
.lf-field input::placeholder { color:var(--dim); }
.lf-actions { display:flex; gap:8px; justify-content:flex-end; }
.btn-log { padding:10px 22px; background:var(--green); color:var(--black); border:none; border-radius:9px; font-family:'Bebas Neue',sans-serif; font-size:0.95rem; letter-spacing:1.5px; cursor:pointer; }
.btn-cancel-form { padding:10px 18px; background:none; color:var(--dim); border:1px solid var(--border); border-radius:9px; font-family:'Syne',sans-serif; font-size:0.82rem; cursor:pointer; }

/* Week view */
.week-day-grid { display:grid; grid-template-columns:repeat(7,1fr); gap:10px; margin-bottom:24px; }
.wday { background:var(--card); border:1px solid var(--border); border-radius:14px; padding:16px 10px; text-align:center; cursor:pointer; transition:all 0.2s; }
.wday:hover { border-color:var(--green); transform:translateY(-2px); }
.wday.is-today { border-color:var(--green); background:var(--green-dim); }
.wday.is-done { border-color:rgba(74,222,128,0.25); }
.wday-name { font-size:0.7rem; font-weight:700; letter-spacing:1.5px; text-transform:uppercase; color:var(--off); margin-bottom:10px; }
.wday.is-today .wday-name { color:var(--green); }
.wday-icon { font-size:1.4rem; margin-bottom:8px; display:flex; align-items:center; justify-content:center; min-height:28px; }
.wday-label { font-size:0.8rem; color:var(--off); line-height:1.3; font-weight:500; }
.wday.is-today .wday-label { color:var(--off); }
.week-stat-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:14px; }

/* Nutrition */
.day-picker-nav { display:flex; gap:6px; margin-bottom:20px; flex-wrap:wrap; }
.dp-btn { padding:8px 16px; border-radius:8px; border:1px solid var(--border); background:var(--card); font-family:'DM Mono',monospace; font-size:0.77rem; color:var(--dim); cursor:pointer; transition:all 0.2s; }
.dp-btn:hover { border-color:var(--border2); color:var(--off); }
.dp-btn.active { border-color:var(--green); background:var(--green-dim); color:var(--green); }
.macro-bar { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:24px; display:grid; grid-template-columns:repeat(4,1fr); gap:20px; margin-bottom:16px; }
.mb-item { display:flex; flex-direction:column; gap:4px; }
.mb-label { font-size:0.6rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); }
.mb-val { font-family:'Bebas Neue',sans-serif; font-size:2rem; letter-spacing:1px; color:var(--green); line-height:1; transition:color 0.3s; }
.mb-val.over { color:var(--red); }
.mb-target { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--dim); }
.mb-bar { height:3px; background:rgba(255,255,255,0.06); border-radius:2px; margin-top:6px; overflow:hidden; }
.mb-fill { height:100%; border-radius:2px; background:var(--green); transition:width 0.4s ease, background 0.3s; }
.mb-fill.over { background:var(--red); }
.meal-list { display:flex; flex-direction:column; gap:8px; margin-bottom:16px; }
.meal-row { display:grid; grid-template-columns:1fr auto auto; align-items:center; gap:16px; padding:14px 18px; background:var(--card); border:1px solid var(--border); border-radius:12px; animation:fadeUp 0.25s ease forwards; }
.mr-name { font-size:0.87rem; font-weight:600; margin-bottom:3px; }
.mr-macros { font-family:'DM Mono',monospace; font-size:0.7rem; color:var(--dim); display:flex; gap:10px; }
.mr-macros .mp { color:var(--green); } .mr-macros .mc { color:var(--blue); } .mr-macros .mf { color:var(--orange); }
.mr-cal { font-family:'Bebas Neue',sans-serif; font-size:1.25rem; color:var(--off); letter-spacing:1px; white-space:nowrap; }
.mr-del { width:28px; height:28px; border-radius:7px; border:1px solid var(--border); background:none; color:var(--dim); font-size:0.82rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
.mr-del:hover { background:var(--red-dim); border-color:var(--red); color:var(--red); }
.empty { text-align:center; padding:36px; color:var(--dim); font-size:0.83rem; border:1px dashed rgba(255,255,255,0.07); border-radius:14px; }
.empty-icon { font-size:1.8rem; margin-bottom:8px; opacity:0.35; }

/* Progress */
.progress-grid { display:grid; grid-template-columns:1fr 1fr; gap:16px; margin-bottom:16px; }
.prog-card { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:24px; }
.prog-card.wide { grid-column:1/-1; }
.pc-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1.5px; margin-bottom:16px; }
.weight-big { font-family:'Bebas Neue',sans-serif; font-size:3.8rem; letter-spacing:1px; line-height:1; }
.weight-change { font-size:0.85rem; color:var(--green); font-weight:600; margin-top:4px; margin-bottom:16px; }
.mini-bars { display:flex; align-items:flex-end; gap:5px; height:56px; margin-top:16px; }
.mini-bar { flex:1; border-radius:3px 3px 0 0; background:rgba(74,222,128,0.18); }
.mini-bar.now { background:var(--green); }
.stat-boxes { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.sbox { background:var(--dark); border:1px solid var(--border); border-radius:10px; padding:14px; }
.sbox-val { font-family:'Bebas Neue',sans-serif; font-size:1.7rem; letter-spacing:1px; color:var(--green); line-height:1; }
.sbox-label { font-size:0.62rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--dim); margin-top:4px; }
.streak-cal { display:grid; grid-template-columns:repeat(7,1fr); gap:5px; }
.sc-day { aspect-ratio:1; border-radius:5px; background:rgba(255,255,255,0.04); border:1px solid var(--border); display:flex; align-items:center; justify-content:center; font-family:'DM Mono',monospace; font-size:0.58rem; color:var(--dim); }
.sc-day.done { background:var(--green-dim); border-color:rgba(74,222,128,0.3); }
.sc-day.today { background:var(--green); color:var(--black); font-weight:700; border-color:var(--green); }

/* ── WORKOUT ENVIRONMENT ── */
#screen-workout { display:none; }
#screen-workout.active { display:flex !important; flex-direction:column; position:fixed !important; top:0; left:0; right:0; bottom:0; height:100vh; height:100dvh; width:100vw; overflow:hidden; background:var(--black); z-index:5000; }
.wo-header { display:flex; align-items:center; gap:16px; padding:max(16px,env(safe-area-inset-top)) 24px 16px; border-bottom:1px solid var(--border); background:rgba(10,10,10,0.95); flex-shrink:0; }
.wo-back { padding:10px 18px; border:1px solid var(--border2); border-radius:9px; background:var(--card); color:var(--white); font-family:'Syne',sans-serif; font-size:0.88rem; font-weight:600; cursor:pointer; transition:all 0.2s; }
.wo-back:hover { color:var(--green); border-color:var(--green); }
.wo-title { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:1.5px; flex:1; }
.wo-progress-wrap { flex:1; display:flex; align-items:center; gap:10px; max-width:300px; }
.wo-progress-bar { flex:1; height:4px; background:rgba(255,255,255,0.06); border-radius:2px; overflow:hidden; }
.wo-progress-fill { height:100%; background:var(--green); border-radius:2px; transition:width 0.4s ease; }
.wo-progress-label { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); white-space:nowrap; }
.wo-body { display:flex; flex:1; overflow:hidden; }
.wo-exercise-list { width:280px; flex-shrink:0; overflow-y:auto; border-right:1px solid var(--border); padding:16px 12px; display:flex; flex-direction:column; gap:6px; }
.wo-ex-item { padding:12px 14px; border-radius:10px; border:1px solid var(--border); cursor:pointer; transition:all 0.18s; }
.wo-ex-item:hover { border-color:var(--border2); }
.wo-ex-item.active { border-color:var(--green); background:var(--green-dim); }
.wo-ex-item.completed { border-color:rgba(74,222,128,0.2); background:rgba(74,222,128,0.04); }
.wo-ex-num { font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--dim); margin-bottom:4px; }
.wo-ex-item.active .wo-ex-num { color:var(--green); }
.wo-ex-name { font-size:0.85rem; font-weight:600; color:var(--off); }
.wo-ex-item.active .wo-ex-name { color:var(--green); }
.wo-ex-item.completed .wo-ex-name { color:var(--green); }
.wo-ex-sets { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--dim); margin-top:3px; }
.wo-ex-done-check { display:inline-block; width:14px; height:14px; border-radius:3px; background:var(--green); color:var(--black); font-size:0.55rem; text-align:center; line-height:14px; margin-left:6px; }
.wo-main { flex:1; overflow-y:auto; padding:20px 24px; display:flex; flex-direction:column; gap:16px; }
.wo-main.elite { padding:16px 20px; gap:12px; }
.wo-main.elite .ex-demo-wrap { display:none; }
.wo-main.elite .wo-ex-header { padding:12px 0; border-bottom:none; }
.wo-main.elite .sets-panel { background:var(--dark); border-color:var(--border2); padding:18px; }
.strength-score { display:flex; align-items:center; gap:12px; padding:10px 14px; background:linear-gradient(135deg,rgba(74,222,128,0.08),rgba(74,222,128,0.04)); border:1px solid rgba(74,222,128,0.2); border-radius:10px; margin-bottom:12px; font-family:'DM Mono',monospace; }
.strength-score-val { font-size:1.4rem; font-weight:600; color:var(--green); letter-spacing:1px; }
.strength-score-label { font-size:0.65rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); margin-top:2px; }
.strength-score-delta { font-size:0.8rem; color:var(--green); margin-left:auto; }
.strength-score-delta.down { color:var(--dim); }

/* Exercise demo panel */
.ex-video-panel { background:var(--card); border:1px solid var(--border); border-radius:18px; overflow:hidden; }
.ex-video-header { display:flex; align-items:center; justify-content:space-between; padding:18px 22px 14px; flex-wrap:wrap; gap:10px; }
.ex-video-title { font-family:'Bebas Neue',sans-serif; font-size:1.8rem; letter-spacing:1.5px; }
.ex-video-badge { font-size:0.7rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--green); background:var(--green-dim); border:1px solid rgba(74,222,128,0.3); padding:8px 14px; border-radius:10px; cursor:pointer; transition:all 0.15s; user-select:none; display:flex; flex-direction:column; gap:2px; min-width:110px; position:relative; }
.ex-video-badge:hover { background:rgba(74,222,128,0.15); border-color:rgba(74,222,128,0.5); transform:scale(1.02); }
.ex-video-badge:active { transform:scale(0.98); }
.ex-demo-wrap { padding:16px 18px; border-top:1px solid var(--border); }
.ex-muscles-tag { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); margin-bottom:14px; }
.ex-demo-frames { display:grid; grid-template-columns:repeat(3,1fr); gap:12px; }
.demo-frame { background:var(--dark); border:1px solid var(--border); border-radius:12px; overflow:hidden; display:flex; flex-direction:column; }
.demo-frame-img { width:100%; aspect-ratio:4/3; object-fit:cover; display:block; background:var(--dark); }
.demo-frame-img-placeholder { width:100%; aspect-ratio:4/3; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; background:linear-gradient(135deg,#1a1a1a,#111); }
.demo-frame-label { font-size:0.62rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; padding:8px 10px; text-align:center; }
.demo-frame:nth-child(1) .demo-frame-label { color:var(--blue); }
.demo-frame:nth-child(2) .demo-frame-label { color:var(--green); }
.demo-frame:nth-child(3) .demo-frame-label { color:var(--orange); }
.demo-frame-icon { font-size:2rem; opacity:0.4; }
.demo-frame-name { font-size:0.65rem; color:var(--dim); text-align:center; padding:0 8px; }

/* Exercise customizer */
.ex-customizer { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:20px; }
.ec-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
.ec-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1px; }
.btn-add-ex { display:flex; align-items:center; gap:6px; padding:9px 16px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.25); border-radius:9px; color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:0.9rem; letter-spacing:1.5px; cursor:pointer; transition:all 0.2s; }
.btn-add-ex:hover { background:rgba(74,222,128,0.2); }
.ec-list { display:flex; flex-direction:column; gap:6px; }
.ec-row { display:grid; grid-template-columns:24px 1fr auto auto; align-items:center; gap:10px; padding:10px 12px; background:var(--dark); border:1px solid var(--border); border-radius:10px; cursor:pointer; transition:all 0.18s; }
.ec-row:hover { border-color:var(--border2); }
.ec-row.active { border-color:var(--green); background:var(--green-dim); }
.ec-num { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); text-align:center; }
.ec-row.active .ec-num { color:var(--green); }
.ec-name { font-size:0.85rem; font-weight:600; color:var(--off); }
.ec-row.active .ec-name { color:var(--green); }
.ec-sets { font-family:'DM Mono',monospace; font-size:0.7rem; color:var(--dim); white-space:nowrap; }
.ec-del { width:26px; height:26px; border-radius:6px; border:1px solid var(--border); background:none; color:var(--dim); cursor:pointer; font-size:0.75rem; display:flex; align-items:center; justify-content:center; transition:all 0.2s; flex-shrink:0; }
.ec-del:hover { background:var(--red-dim); border-color:var(--red); color:var(--red); }

/* Add exercise modal */
.add-ex-modal { position:fixed; inset:0; background:rgba(0,0,0,0.85); backdrop-filter:blur(8px); z-index:900; display:none; align-items:flex-end; justify-content:center; }
.add-ex-modal.open { display:flex; }
.add-ex-sheet { background:var(--dark); border:1px solid var(--border2); border-radius:24px 24px 0 0; width:100%; max-width:680px; max-height:85vh; display:flex; flex-direction:column; }
.aes-header { display:flex; align-items:center; justify-content:space-between; padding:20px 24px 14px; border-bottom:1px solid var(--border); flex-shrink:0; }
.aes-title { font-family:'Bebas Neue',sans-serif; font-size:1.3rem; letter-spacing:1px; }
.aes-close { width:32px; height:32px; border-radius:8px; border:1px solid var(--border); background:none; color:var(--dim); cursor:pointer; font-size:1rem; display:flex; align-items:center; justify-content:center; }
.aes-close:hover { border-color:var(--border2); color:var(--white); }
.aes-search { padding:14px 24px; border-bottom:1px solid var(--border); flex-shrink:0; }
.aes-search input { width:100%; padding:10px 14px; background:var(--card); border:1px solid var(--border); border-radius:10px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; }
.aes-search input:focus { border-color:var(--green); }
.aes-search input::placeholder { color:var(--dim); }
.aes-filters { display:flex; gap:8px; padding:12px 24px; border-bottom:1px solid var(--border); flex-shrink:0; flex-wrap:wrap; }
.aes-filter-btn { display:flex; align-items:center; gap:5px; padding:7px 12px; border-radius:8px; border:1px solid var(--border); background:var(--card); font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); cursor:pointer; white-space:nowrap; transition:all 0.15s; position:relative; }
.aes-filter-btn:hover { border-color:var(--border2); color:var(--off); }
.aes-filter-btn.active { border-color:var(--green); background:var(--green-dim); color:var(--green); }
.aes-filter-btn svg { flex-shrink:0; }
.aes-dropdown { position:fixed; background:#1a1a1a; border:1px solid rgba(255,255,255,0.15); border-radius:12px; padding:6px 0; min-width:180px; z-index:9999; box-shadow:0 12px 40px rgba(0,0,0,0.7); max-height:280px; overflow-y:auto; }
.aes-dropdown-item { display:flex; align-items:center; justify-content:space-between; padding:10px 16px; font-size:0.82rem; color:#E2DFD8; cursor:pointer; transition:background 0.12s; }
.aes-dropdown-item:hover { background:rgba(255,255,255,0.06); }
.aes-dropdown-item.selected { color:var(--green); }
.aes-dropdown-item.selected::after { content:'✓'; font-size:0.75rem; }
.aes-muscle-dot { width:8px; height:8px; border-radius:50%; flex-shrink:0; }
.aes-list { overflow-y:auto; padding:12px 24px 24px; flex:1; display:flex; flex-direction:column; gap:6px; }
.aes-item { display:grid; grid-template-columns:10px 1fr auto; align-items:center; gap:10px; padding:12px 14px; background:var(--card); border:1px solid var(--border); border-radius:10px; cursor:pointer; transition:all 0.18s; }
.aes-item:hover { border-color:var(--green); }
.aes-item.added { border-color:rgba(74,222,128,0.3); background:rgba(74,222,128,0.05); }
.aes-item-name { font-size:0.85rem; font-weight:600; color:var(--off); }
.aes-item.added .aes-item-name { color:var(--green); }
.aes-item-cat { font-size:0.62rem; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:var(--dim); }
.aes-item-add { width:28px; height:28px; border-radius:7px; border:1px solid var(--green); background:var(--green-dim); color:var(--green); font-size:1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all 0.2s; flex-shrink:0; }
.aes-item-add:hover { background:var(--green); color:var(--black); }
.aes-item-add.done { background:var(--green); color:var(--black); border-color:var(--green); }
.ex-video-placeholder { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:12px; background:#0d0d0d; }
.ex-video-placeholder-icon { font-size:2.5rem; opacity:0.3; }
.ex-video-placeholder p { font-size:0.82rem; color:var(--dim); }

/* Sets tracker */
.sets-panel { background:var(--card); border:1px solid var(--border); border-radius:18px; padding:22px; overflow:visible; }
.sets-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
.sets-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1px; }
.rest-timer { display:flex; align-items:center; gap:8px; font-family:'DM Mono',monospace; font-size:0.82rem; color:var(--dim); }
.rest-timer-btn { padding:6px 14px; border:1px solid var(--border); border-radius:7px; background:none; color:var(--dim); font-family:'DM Mono',monospace; font-size:0.78rem; cursor:pointer; transition:all 0.2s; }
.rest-timer-btn:hover { border-color:var(--orange); color:var(--orange); }
.rest-timer-btn.running { border-color:var(--orange); color:var(--orange); animation:pulse 1s infinite; }
.sets-table { width:100%; border-collapse:collapse; }
.sets-table col:nth-child(1) { width:55px; }
.sets-table col:nth-child(2) { width:auto; }
.sets-table col:nth-child(3) { width:auto; }
.sets-table col:nth-child(4) { width:44px; }
.sets-table col:nth-child(5) { width:36px; }
.sets-table th { font-size:0.6rem; font-weight:700; letter-spacing:2px; text-transform:uppercase; color:var(--dim); padding:0 8px 10px; text-align:center; white-space:nowrap; }
.sets-table th:first-child { text-align:left; }
.sets-table td { padding:6px 8px; text-align:center; border-top:1px solid var(--border); vertical-align:middle; }
.sets-table tr:first-child td { border-top:none; }
.set-input { width:64px; padding:8px 6px; background:var(--dark); border:1px solid var(--border); border-radius:8px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--white); text-align:center; outline:none; transition:border-color 0.2s; }
.set-input:focus { border-color:var(--green); }
.set-num { font-family:'DM Mono',monospace; font-size:0.82rem; color:var(--dim); }
.set-done-btn { width:32px; height:32px; border-radius:8px; border:1.5px solid var(--border2); background:none; color:var(--dim); cursor:pointer; font-size:0.8rem; transition:all 0.2s; }
.set-done-btn:hover { border-color:var(--green); color:var(--green); }
.set-done-btn.done { background:var(--green); border-color:var(--green); color:var(--black); }
.set-del-btn { width:28px; height:28px; border-radius:6px; border:1px solid transparent; background:none; color:var(--dim); cursor:pointer; font-size:0.7rem; transition:all 0.2s; opacity:0.5; }
.set-del-btn:hover { opacity:1; border-color:var(--red); color:var(--red); background:rgba(244,63,94,0.1); }
/* Hide the prev-data row under inputs for horizontal simplicity */
.set-cell-weight, .set-cell-reps { text-align:center; }
.set-cell-weight .set-prev, .set-cell-reps .set-prev { font-family:'DM Mono',monospace; font-size:0.62rem; color:var(--dim); margin-top:2px; display:block; }
.set-cell-weight .set-prev.has-data, .set-cell-reps .set-prev.has-data { color:var(--blue); }

/* Rest timer overlay */
.rest-overlay { position:fixed; inset:0; background:rgba(0,0,0,0.85); backdrop-filter:blur(8px); z-index:800; display:none; align-items:center; justify-content:center; }
.rest-overlay.open { display:flex; }
.rest-card { background:var(--card); border:1px solid var(--border2); border-radius:24px; padding:48px 60px; text-align:center; }
.rest-label { font-size:0.72rem; font-weight:700; letter-spacing:3px; text-transform:uppercase; color:var(--dim); margin-bottom:12px; }
.rest-countdown { font-family:'Bebas Neue',sans-serif; font-size:6rem; letter-spacing:2px; color:var(--green); line-height:1; margin-bottom:8px; }
.rest-sub { font-size:0.82rem; color:var(--dim); margin-bottom:28px; }
.btn-skip-rest { padding:12px 32px; border:1px solid var(--border); border-radius:10px; background:none; color:var(--off); font-family:'Syne',sans-serif; font-size:0.88rem; cursor:pointer; transition:all 0.2s; }
.btn-skip-rest:hover { border-color:var(--green); color:var(--green); }

/* Nav buttons in workout */
.wo-nav-btns { display:flex; gap:10px; margin-top:4px; padding-bottom: env(safe-area-inset-bottom, 0px); }
.btn-prev-ex, .btn-next-ex { flex:1; padding:13px; border:1px solid var(--border2); border-radius:11px; background:var(--card); color:var(--white); font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:1.5px; cursor:pointer; transition:all 0.2s; }
.btn-prev-ex.hidden { display:none !important; flex:0 !important; width:0 !important; min-width:0 !important; padding:0 !important; border:none !important; overflow:hidden !important; }
.btn-prev-ex:hover { border-color:var(--border2); }
.btn-next-ex { background:var(--green); color:var(--black); border-color:var(--green); }
.btn-next-ex:hover { opacity:0.9; }
.btn-finish-workout { width:100%; padding:16px; padding-bottom: max(16px, env(safe-area-inset-bottom)); background:var(--green); color:var(--black); border:none; border-radius:0; font-family:'Bebas Neue',sans-serif; font-size:1.2rem; letter-spacing:2px; cursor:pointer; transition:all 0.2s; display:none; flex-shrink:0; }
.btn-finish-workout:hover { opacity:0.9; transform:translateY(-1px); }

/* Workout Left Panel */
.wo-left-panel { width:220px; flex-shrink:0; background:var(--dark); border-right:1px solid var(--border); display:flex; flex-direction:column; overflow:hidden; }
.wo-left-header { padding:14px 16px; border-bottom:1px solid var(--border); flex-shrink:0; }
.wo-left-title { font-family:'Bebas Neue',sans-serif; font-size:1.05rem; letter-spacing:1px; color:var(--white); }
.wo-left-sub { font-size:0.72rem; color:var(--dim); margin-top:2px; font-family:'Inter',sans-serif; }
.wo-ex-sidebar { flex:1; overflow-y:auto; padding:8px; }
.wo-ex-sidebar-item { display:flex; align-items:center; gap:10px; padding:10px 12px; border-radius:10px; cursor:pointer; transition:all 0.15s; border:1px solid transparent; margin-bottom:4px; }
.wo-ex-sidebar-item:hover { background:rgba(255,255,255,0.04); }
.wo-ex-sidebar-item.active { background:var(--green-dim); border-color:rgba(74,222,128,0.2); }
.wo-ex-sidebar-num { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--dim); width:18px; flex-shrink:0; }
.wo-ex-sidebar-item.active .wo-ex-sidebar-num { color:var(--green); }
.wo-ex-sidebar-info { flex:1; min-width:0; }
.wo-ex-sidebar-name { font-size:0.82rem; font-weight:600; color:var(--off); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.wo-ex-sidebar-item.active .wo-ex-sidebar-name { color:var(--white); }
.wo-ex-sidebar-sets { font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--dim); margin-top:2px; }
.wo-ex-sidebar-done { width:16px; height:16px; border-radius:50%; background:var(--green); display:flex; align-items:center; justify-content:center; font-size:0.55rem; color:var(--black); flex-shrink:0; }
.wo-ex-del { width:22px; height:22px; border-radius:5px; border:1px solid transparent; background:none; color:var(--dim); cursor:pointer; font-size:0.65rem; opacity:0; transition:all 0.15s; flex-shrink:0; }
.wo-ex-sidebar-item:hover .wo-ex-del { opacity:1; border-color:var(--border); }
.wo-ex-del:hover { background:rgba(239,68,68,0.1); border-color:rgba(239,68,68,0.3); color:#ef4444; }
.wo-ex-header { padding:16px 20px 12px; border-bottom:1px solid var(--border); }
.ex-video-title { font-family:'Bebas Neue',sans-serif; font-size:1.6rem; letter-spacing:1px; color:var(--white); line-height:1; }

/* Sets table with add/delete */
.sets-table th { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--dim); text-transform:uppercase; letter-spacing:1px; padding:8px 10px; text-align:left; }
.sets-table td { padding:8px 10px; }
.set-prev { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); }
.set-weight-input { width:75px; padding:7px 10px; background:var(--dark); border:1px solid var(--border); border-radius:7px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--white); outline:none; text-align:center; transition:border-color 0.2s; }
.set-weight-input:focus { border-color:var(--green); }
.set-reps-input { width:55px; padding:7px 10px; background:var(--dark); border:1px solid var(--border); border-radius:7px; font-family:'DM Mono',monospace; font-size:0.9rem; color:var(--white); outline:none; text-align:center; transition:border-color 0.2s; }
.set-reps-input:focus { border-color:var(--green); }
.set-check { width:28px; height:28px; border-radius:7px; border:1px solid var(--border); background:none; color:var(--dim); cursor:pointer; font-size:0.9rem; transition:all 0.2s; }
.set-check.done { background:var(--green); border-color:var(--green); color:var(--black); }
.set-weight-input.done, .set-reps-input.done { background:rgba(74,222,128,0.08) !important; border-color:rgba(74,222,128,0.25) !important; color:var(--green) !important; opacity:1 !important; }
.set-del { width:24px; height:24px; border-radius:5px; border:1px solid transparent; background:none; color:var(--dim); cursor:pointer; font-size:0.65rem; transition:all 0.15s; }
.set-del:hover { background:rgba(239,68,68,0.1); border-color:rgba(239,68,68,0.3); color:#ef4444; }

/* Weight log history */
.weight-log-card { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px; margin-bottom:14px; }

/* Meal cat no-emoji fix */
.meal-cat-name { font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:1px; color:var(--white); }
.meal-cat-cals { font-size:0.78rem; color:var(--dim); margin-top:2px; font-family:'Inter',sans-serif; }

/* Meal Categories (MFP-style) */
.meal-cat-card { background:var(--card); border:1px solid var(--border); border-radius:16px; overflow:hidden; margin-bottom:12px; }
.meal-cat-header { display:flex; align-items:center; justify-content:space-between; padding:14px 18px; cursor:pointer; }
.meal-cat-header:hover { background:rgba(255,255,255,0.02); }
.meal-cat-left { display:flex; align-items:center; gap:10px; }
.meal-cat-icon { font-size:1.1rem; }
.meal-cat-name { font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:1px; }
.meal-cat-cals { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); }
.meal-cat-add { display:flex; align-items:center; gap:8px; }
.btn-cat-add { display:flex; align-items:center; gap:5px; padding:7px 13px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); border-radius:8px; color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:0.78rem; letter-spacing:1px; cursor:pointer; white-space:nowrap; transition:all 0.2s; }
.btn-cat-add:hover { background:rgba(74,222,128,0.2); }
.btn-cat-scan { display:flex; align-items:center; gap:5px; padding:7px 13px; background:rgba(99,102,241,0.1); border:1px solid rgba(99,102,241,0.2); border-radius:8px; color:#818cf8; font-family:'Bebas Neue',sans-serif; font-size:0.78rem; letter-spacing:1px; cursor:pointer; white-space:nowrap; transition:all 0.2s; }
.btn-cat-scan:hover { background:rgba(99,102,241,0.2); }
.meal-cat-entries { border-top:1px solid var(--border); }
.meal-entry-row { display:grid; grid-template-columns:1fr auto auto; align-items:center; gap:10px; padding:10px 18px; border-bottom:1px solid rgba(255,255,255,0.04); }
.meal-entry-row:last-child { border-bottom:none; }
.mer-name { font-size:0.83rem; font-weight:600; color:var(--off); }
.mer-macros { font-size:0.7rem; color:var(--dim); margin-top:2px; }
.mer-cal { font-family:'Bebas Neue',sans-serif; font-size:0.95rem; color:var(--green); }
.mer-del { width:24px; height:24px; border-radius:6px; border:1px solid var(--border); background:none; color:var(--dim); cursor:pointer; font-size:0.7rem; display:flex; align-items:center; justify-content:center; transition:all 0.2s; }
.mer-del:hover { background:rgba(239,68,68,0.1); border-color:rgba(239,68,68,0.3); color:#ef4444; }
.meal-cat-total { display:flex; justify-content:flex-end; gap:16px; padding:8px 18px; background:rgba(255,255,255,0.02); border-top:1px solid var(--border); font-family:'DM Mono',monospace; font-size:0.7rem; color:var(--dim); }

/* Food Search Modal */
.food-modal { position:fixed; inset:0; background:rgba(0,0,0,0.9); backdrop-filter:blur(8px); z-index:900; display:none; flex-direction:column; }
.food-modal.open { display:flex; }
.food-modal-header { display:flex; align-items:center; gap:12px; padding:16px 20px; border-bottom:1px solid var(--border); background:var(--dark); flex-shrink:0; }
.food-modal-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1px; flex:1; }
.food-modal-close { width:32px; height:32px; border-radius:8px; border:1px solid var(--border); background:none; color:var(--dim); cursor:pointer; font-size:1rem; display:flex; align-items:center; justify-content:center; }
.food-modal-search-row { display:flex; gap:8px; padding:14px 20px; border-bottom:1px solid var(--border); background:var(--dark); flex-shrink:0; }
.food-modal-input { flex:1; padding:10px 14px; background:var(--card); border:1px solid var(--border); border-radius:10px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; }
.food-modal-input:focus { border-color:var(--green); }
.food-modal-input::placeholder { color:var(--dim); }
.btn-food-modal-search { padding:10px 16px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.25); border-radius:10px; color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:0.88rem; letter-spacing:1.5px; cursor:pointer; white-space:nowrap; }
.btn-food-modal-scan { padding:10px 14px; background:rgba(99,102,241,0.1); border:1px solid rgba(99,102,241,0.2); border-radius:10px; color:#818cf8; font-size:1rem; cursor:pointer; }
.food-modal-tabs { display:flex; border-bottom:1px solid var(--border); background:var(--dark); flex-shrink:0; }
.fmt-tab { flex:1; padding:10px; text-align:center; font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); cursor:pointer; border-bottom:2px solid transparent; transition:all 0.2s; }
.fmt-tab.active { color:var(--green); border-bottom-color:var(--green); }
.food-modal-results { flex:1; overflow-y:auto; background:var(--black); }
.food-modal-empty { padding:40px 20px; text-align:center; color:var(--dim); font-size:0.83rem; }
.food-modal-loading { padding:40px 20px; text-align:center; color:var(--dim); }
.food-modal-item { display:grid; grid-template-columns:1fr auto; align-items:center; gap:12px; padding:13px 20px; border-bottom:1px solid rgba(255,255,255,0.04); cursor:pointer; transition:background 0.15s; }
.food-modal-item:hover { background:rgba(255,255,255,0.03); }
.fmi-name { font-size:0.85rem; font-weight:600; color:var(--off); }
.fmi-brand { font-size:0.7rem; color:var(--dim); margin-top:1px; }
.fmi-macros { font-size:0.7rem; color:var(--dim); margin-top:2px; }
.fmi-cal { font-family:'Bebas Neue',sans-serif; font-size:1rem; color:var(--green); }
.fmi-add { width:30px; height:30px; border-radius:8px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); color:var(--green); font-size:1.1rem; cursor:pointer; display:flex; align-items:center; justify-content:center; }
.fmi-add:hover { background:var(--green); color:var(--black); }
.recent-foods-section { padding:14px 20px 8px; }
.rfs-label { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--dim); letter-spacing:1px; text-transform:uppercase; margin-bottom:10px; }

/* Water Tracking */
.water-section { background:var(--card); border:1px solid var(--border); border-radius:16px; padding:20px 22px; margin-bottom:14px; }
.water-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
.water-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1px; }
.water-goal-label { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--dim); }
.water-ring-wrap { display:flex; align-items:center; gap:24px; margin-bottom:16px; }
.water-ring { position:relative; width:100px; height:100px; flex-shrink:0; }
.water-ring svg { transform:rotate(-90deg); }
.water-ring-track { fill:none; stroke:var(--border2); stroke-width:8; }
.water-ring-fill { fill:none; stroke:#38bdf8; stroke-width:8; stroke-linecap:round; transition:stroke-dashoffset 0.4s ease; }
.water-ring-text { position:absolute; inset:0; display:flex; flex-direction:column; align-items:center; justify-content:center; }
.water-oz { font-family:'Bebas Neue',sans-serif; font-size:1.6rem; color:#38bdf8; line-height:1; }
.water-oz-label { font-family:'DM Mono',monospace; font-size:0.62rem; color:var(--dim); }
.water-btns { display:flex; gap:8px; flex-wrap:wrap; }
.water-add-btn { padding:9px 16px; border-radius:9px; border:1px solid rgba(56,189,248,0.25); background:rgba(56,189,248,0.08); color:#38bdf8; font-family:'Bebas Neue',sans-serif; font-size:0.9rem; letter-spacing:1.5px; cursor:pointer; transition:all 0.2s; }
.water-add-btn:hover { background:rgba(56,189,248,0.18); }
.water-add-btn.undo { border-color:var(--border); background:none; color:var(--dim); font-size:0.75rem; letter-spacing:1px; }
.water-cups { display:flex; gap:3px; margin-top:12px; }
.water-cup { width:100%; height:10px; border-radius:4px; transition:background 0.3s, opacity 0.3s; }
.water-cup.filled { background:#38bdf8; opacity:1; }
.water-cup.empty { background:var(--border2); opacity:0.4; }

/* Food Search */
.food-search-wrap { background:var(--card); border:1px solid var(--border); border-radius:16px; overflow:hidden; margin-bottom:14px; }
.food-search-header { padding:16px 20px; border-bottom:1px solid var(--border); }
.food-search-title { font-family:'Bebas Neue',sans-serif; font-size:1.1rem; letter-spacing:1px; margin-bottom:10px; }
.food-search-row { display:flex; gap:8px; }
.food-search-input { flex:1; padding:10px 14px; background:var(--dark); border:1px solid var(--border); border-radius:10px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; }
.food-search-input:focus { border-color:#38bdf8; }
.food-search-input::placeholder { color:var(--dim); }
.btn-food-search { padding:10px 18px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.25); border-radius:10px; color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:0.9rem; letter-spacing:1.5px; cursor:pointer; white-space:nowrap; transition:all 0.2s; }
.btn-food-search:hover { background:rgba(74,222,128,0.2); }
.food-results { max-height:320px; overflow-y:auto; }
.food-result-item { display:grid; grid-template-columns:10px 1fr auto; align-items:center; gap:10px; padding:12px 20px; border-bottom:1px solid var(--border); transition:background 0.15s; cursor:pointer; }
.food-result-item:hover { background:rgba(255,255,255,0.03); }
.food-result-item:last-child { border-bottom:none; }
.fri-name { font-size:0.85rem; font-weight:600; color:var(--off); }
.fri-meta { font-size:0.72rem; color:var(--dim); margin-top:2px; }
.fri-cal { font-family:'Bebas Neue',sans-serif; font-size:1rem; color:var(--green); white-space:nowrap; }
.btn-log-food { padding:7px 12px; background:var(--green-dim); border:1px solid rgba(74,222,128,0.2); border-radius:8px; color:var(--green); font-family:'Bebas Neue',sans-serif; font-size:0.8rem; letter-spacing:1px; cursor:pointer; white-space:nowrap; }
.btn-log-food:hover { background:rgba(74,222,128,0.2); }
.food-search-empty { padding:24px; text-align:center; color:var(--dim); font-size:0.83rem; }
.food-search-loading { padding:24px; text-align:center; color:var(--dim); font-size:0.83rem; }

/* Serving modal */
.serving-modal { position:fixed; inset:0; background:rgba(0,0,0,0.85); backdrop-filter:blur(8px); z-index:900; display:none; align-items:center; justify-content:center; padding:20px; }
.serving-modal.open { display:flex; }
.serving-card { background:var(--dark); border:1px solid var(--border2); border-radius:20px; padding:28px; width:100%; max-width:380px; }
.serving-food-name { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:1px; margin-bottom:4px; }
.serving-macro-row { display:flex; gap:12px; margin:14px 0; }
.sm-chip { flex:1; text-align:center; padding:10px 6px; background:var(--card); border-radius:10px; border:1px solid var(--border); }
.sm-val { font-family:'Bebas Neue',sans-serif; font-size:1.2rem; }
.sm-label { font-size:0.62rem; color:var(--dim); letter-spacing:1px; text-transform:uppercase; }
.serving-size-row { display:flex; align-items:center; gap:10px; margin-bottom:16px; }
.serving-size-row label { font-size:0.8rem; color:var(--off); white-space:nowrap; }
.serving-size-input { flex:1; padding:9px 12px; background:var(--card); border:1px solid var(--border); border-radius:9px; font-family:'Syne',sans-serif; font-size:0.88rem; color:var(--white); outline:none; text-align:center; }
.serving-size-input:focus { border-color:var(--green); }
.serving-actions { display:flex; gap:10px; }
.btn-cancel-serving { flex:1; padding:12px; border:1px solid var(--border); border-radius:10px; background:none; color:var(--dim); font-family:'Syne',sans-serif; font-size:0.85rem; cursor:pointer; }
.btn-confirm-log { flex:2; padding:12px; background:var(--green); border:none; border-radius:10px; color:var(--black); font-family:'Bebas Neue',sans-serif; font-size:1rem; letter-spacing:2px; cursor:pointer; }

/* Settings */
.settings-input { width:100%; padding:10px 13px; background:var(--dark); border:1px solid var(--border); border-radius:9px; font-family:'Syne',sans-serif; font-size:0.87rem; color:var(--white); outline:none; }
.settings-input[readonly] { color:var(--dim); cursor:default; }

@media (max-width:768px) {
  /* Global */
  html, body { overflow-x:hidden !important; max-width:100vw !important; }
  .screen { max-width:100vw; overflow-x:hidden; }

  /* Nav */
  nav { padding:12px 16px; max-width:100vw; }
  .logo { font-size:1.5rem; }
  .nav-pill { display:none; }
  .nav-cta { padding:8px 14px; font-size:0.82rem; white-space:nowrap; }

  /* Onboarding hero */
  #screen-onboard .hero { padding:28px 16px 20px; max-width:100vw; }
  #ob-headline { font-size:clamp(2.4rem,11vw,3.5rem); }
  .line-accent { display:inline; }
  .hero-sub { font-size:0.88rem; max-width:100%; }
  .tier-selector { flex-direction:column; gap:8px; }
  .tier-btn { min-width:unset; width:100%; }

  /* Form */
  .main-layout { grid-template-columns:1fr; padding:0 16px 40px; gap:16px; max-width:100vw; }
  .form-card { padding:20px 16px; max-width:100%; }
  .form-row { grid-template-columns:1fr; gap:10px; }
  .split-selector { grid-template-columns:1fr 1fr; }
  .timeline-selector { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
  .tl-btn { padding:12px 8px; font-size:0.78rem; text-align:center; }
  .day-picker { gap:5px; flex-wrap:wrap; }
  .day-pill { padding:9px 10px; font-size:0.75rem; }
  .sidebar-info { display:none; }

  /* Results */
  #results-section { padding:0 16px 40px; max-width:100vw; overflow-x:hidden; }
  .results-banner { flex-direction:column; gap:10px; align-items:flex-start; }
  .results-banner h2 { font-size:1.5rem; }
  .results-tier-badge { font-size:0.8rem; }
  .results-grid { grid-template-columns:1fr; gap:12px; }
  .r-card { padding:18px 16px; max-width:100%; }
  .r-card h3 { font-size:1.1rem; }
  .r-card p, .r-card li { font-size:0.82rem; }
  .week-card { padding:18px 16px; }
  .week-card h3 { font-size:1rem; }
  .day-row { grid-template-columns:60px 1fr; gap:8px; }
  .day-name { font-size:0.68rem; }
  .day-workout { font-size:0.78rem; }
  .day-tag { display:none; }
  .cta-into-app { padding:28px 16px; }
  .cta-into-app h3 { font-size:1.6rem; }
  .cta-into-app p { font-size:0.82rem; }
  .btn-enter-app { padding:14px 24px; font-size:0.95rem; width:100%; justify-content:center; }

  /* Signup */
  .signup-wrap { grid-template-columns:1fr; padding:20px 16px 60px; gap:20px; max-width:100vw; }
  .signup-card { position:static; padding:22px 16px; }
  .signup-left h2 { font-size:2.2rem; }
  .ps-stats { grid-template-columns:1fr 1fr; }
  .sf-row { grid-template-columns:1fr; gap:10px; margin-bottom:0; }

  /* Dashboard shell */
  #screen-dash.active { display:flex !important; flex-direction:column; }
  .sidebar-nav { width:100%; flex-direction:row; padding:6px 8px; border-right:none; border-bottom:1px solid var(--border); overflow-x:auto; gap:2px; flex-wrap:nowrap; -webkit-overflow-scrolling:touch; }
  .sb-label { display:none; }
  .sb-btn { flex-shrink:0; padding:8px 10px; font-size:0.7rem; justify-content:center; border-radius:8px; white-space:nowrap; }
  .sb-btn .sb-icon { display:none; }
  .sb-badge { display:none; }

  /* Today */
  .today-grid { grid-template-columns:1fr 1fr; gap:10px; }
  .sc-val { font-size:1.7rem; }
  .sc-sub { font-size:0.72rem; }
  .workout-card { padding:14px; }
  .wc-header { flex-direction:column; gap:10px; align-items:flex-start; }
  .wc-name { font-size:1.1rem; }
  .btn-primary { width:100%; text-align:center; padding:12px; }
  .ex-row { grid-template-columns:30px 1fr; gap:8px; }
  .ex-row > .ex-detail { display:none; } /* hide standalone muscles column on mobile */

  /* Week */
  .week-stat-grid { grid-template-columns:1fr 1fr; gap:10px; }
  .week-stat-grid .stat-card:last-child { grid-column:1/-1; }
  .week-day-grid { grid-template-columns:repeat(4,1fr); gap:6px; }
  .wday { padding:10px 4px; }
  .wday-icon { font-size:1rem; }
  .wday-label { font-size:0.76rem; }
  .wday-name { font-size:0.66rem; }

  /* Nutrition */
  .macro-bar { grid-template-columns:1fr 1fr; gap:12px; padding:16px; }
  .mb-val { font-size:1.5rem; }
  .mb-label { font-size:0.55rem; }
  .lf-macros { grid-template-columns:1fr 1fr; }
  .meal-row { grid-template-columns:1fr auto auto; gap:8px; padding:12px; }
  .mr-name { font-size:0.82rem; }

  /* Progress */
  .progress-grid { grid-template-columns:1fr; }
  .prog-card.wide { grid-column:1; }
  .weight-big { font-size:2.8rem; }
  .stat-boxes { grid-template-columns:1fr 1fr; }

  /* Program */
  .page-title { font-size:1.5rem; }
  .page-sub { font-size:0.8rem; }

  /* Log forms */
  .log-toggle-header { padding:14px 16px; }
  .log-form { padding:0 14px 14px; }

  /* Settings */
  .settings-grid { grid-template-columns:1fr !important; }

  /* Workout env */
  #screen-workout.active { position:fixed !important; top:0; left:0; right:0; bottom:0; height:100vh !important; height:100dvh !important; overflow:hidden !important; display:flex !important; flex-direction:column !important; }
  .wo-header { padding:max(10px,env(safe-area-inset-top)) 14px 10px; flex-wrap:wrap; gap:8px; }
  .wo-title { font-size:1rem; width:100%; order:-1; }
  .wo-progress-wrap { flex:1; }
  .wo-back { padding:6px 12px; font-size:0.78rem; }
  .wo-body { flex-direction:column; overflow:hidden; flex:1; }
  .wo-left-panel { display:none !important; }
  .wo-main { width:100%; padding:0; overflow-y:auto; overflow-x:hidden; -webkit-overflow-scrolling:touch; flex:1; min-height:0; gap:0; display:block; }
  .ex-demo-wrap { display:none !important; }
  .ex-video-header { padding:16px 16px 8px; }
  .ex-video-title { font-size:1.5rem; }
  .sets-panel { margin:0 12px 12px; border-radius:12px; padding:14px; overflow:visible; }
  .sets-table { width:100%; }
  .sets-table th { font-size:0.62rem; padding:6px 2px; color:var(--off); text-align:center; }
  .sets-table th:first-child { text-align:left; }
  .sets-table td { padding:8px 2px; text-align:center; vertical-align:top; }
  .set-weight-input { width:72px !important; font-size:1rem !important; padding:10px 4px !important; height:44px; text-align:center; }
  .set-reps-input { width:60px !important; font-size:1rem !important; padding:10px 4px !important; height:44px; text-align:center; }
  .set-check { width:40px !important; height:40px !important; font-size:1.1rem !important; }
  .wo-nav-btns { flex-direction:column; gap:8px; padding:10px 14px calc(10px + env(safe-area-inset-bottom, 0px)); flex-shrink:0 !important; background:var(--dark); border-top:1px solid var(--border); z-index:10; }
  #wo-next-btn { width:100%; padding:16px; font-size:1rem; font-family:'Bebas Neue',sans-serif; letter-spacing:1.5px; border-radius:12px; border:none; background:var(--green); color:var(--black); cursor:pointer; }
  #wo-finish-btn { width:100%; padding:14px; font-size:0.9rem; }
  .rest-timer-btn { width:100%; padding:12px; font-size:0.88rem; border-radius:10px; }
  .wo-header { padding:max(10px,env(safe-area-inset-top)) 14px 10px; gap:6px; }
  .wo-title { font-size:0.85rem; flex:1; }
  .wo-back { padding:7px 12px; font-size:0.78rem; }
  .ex-video-header { padding:12px 14px 10px; flex-direction:column; gap:6px; align-items:flex-start; }
  .ex-video-title { font-size:1.2rem; }
  .ex-video-embed { padding:12px; }
  .ex-video-thumb { max-width:100%; }
  .btn-watch-demo { font-size:0.82rem; padding:10px 16px; width:100%; justify-content:center; }
  .sets-panel { padding:14px; overflow:visible; }
  .sets-header { flex-direction:row; gap:8px; align-items:center; justify-content:space-between; }
  .sets-table { font-size:0.85rem; }
  .sets-table th, .sets-table td { padding:6px 3px; }
  .wo-nav-btns { flex-direction:column; gap:8px; }
  .rest-timer-btn { font-size:0.82rem; padding:8px 12px; }
  .rest-card { padding:28px 20px; width:90vw; }
  .rest-countdown { font-size:4rem; }
}

/* ── MOBILE BOTTOM TAB BAR ── */
.mobile-tab-bar {
  display: none; /* hidden on desktop */
}
.mob-more-drawer {
  display: none;
}

@media (max-width: 768px) {
  /* Hide sidebar on mobile */
  .sidebar-nav { display: none !important; }
  
  /* Shell fills screen */
  .shell { 
    flex-direction: column; 
    height: calc(100vh - 60px); 
    overflow: hidden;
    display: flex;
  }
  .main-content { 
    flex: 1;
    min-height: 0;
    padding: 14px 14px 100px;
    width: 100%;
    box-sizing: border-box;
    overflow-x: hidden;
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Bottom tab bar - fixed to bottom of viewport */
  .mobile-tab-bar {
    display: flex !important;
    position: fixed !important;
    top: auto !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    height: 60px !important;
    padding-bottom: env(safe-area-inset-bottom, 6px);
    background: #111 !important;
    border-top: 1px solid rgba(255,255,255,0.1) !important;
    z-index: 9999 !important;
    align-items: stretch;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.5);
    transform: none !important;
  }
  /* Ensure screen-dash doesn't clip the fixed tab bar */
  #screen-dash { overflow: visible !important; }
  #screen-dash.active { overflow: visible !important; }
  .mob-tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 3px;
    background: none;
    border: none;
    color: rgba(255,255,255,0.68);
    cursor: pointer;
    transition: color 0.15s;
    padding: 6px 2px;
    -webkit-tap-highlight-color: transparent;
  }
  .mob-tab.active { color: var(--green); }
  .mob-tab-svg {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }
  .mob-tab-label {
    font-family: 'Inter', sans-serif;
    font-size: 0.56rem;
    font-weight: 600;
    letter-spacing: 0.2px;
    white-space: nowrap;
  }

  /* More drawer */
  .mob-more-drawer {
    display: block;
    position: fixed;
    bottom: 60px;
    left: 0;
    right: 0;
    background: #161616;
    border-top: 1px solid var(--border);
    border-radius: 20px 20px 0 0;
    z-index: 999;
    transform: translateY(110%);
    transition: transform 0.28s cubic-bezier(0.4,0,0.2,1);
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  .mob-more-drawer.open { transform: translateY(0); }
  .mob-more-handle {
    width: 36px; height: 4px;
    background: var(--border);
    border-radius: 2px;
    margin: 10px auto 6px;
  }
  .mob-more-item {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 24px;
    font-family: 'Inter', sans-serif;
    font-size: 0.95rem;
    color: var(--white);
    cursor: pointer;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    -webkit-tap-highlight-color: transparent;
  }
  .mob-more-item:last-child { border-bottom: none; }
  .mob-more-item:active { background: rgba(255,255,255,0.04); }
}

/* Form readability */
/* Fullscreen mode for custom builder modal */
#unplanned-modal.fullscreen-builder {
  align-items: stretch !important;
  justify-content: stretch !important;
}
#unplanned-modal.fullscreen-builder #unplanned-modal-inner {
  max-height: none !important;
  height: 100% !important;
  max-width: none !important;
  border-radius: 0 !important;
  padding-top: max(env(safe-area-inset-top, 16px), 16px) !important;
  padding-bottom: max(env(safe-area-inset-bottom, 20px), 20px) !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}
#unplanned-modal.fullscreen-builder #custom-builder {
  flex: 1 !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: hidden !important;
}
#unplanned-modal.fullscreen-builder #custom-ex-list {
  flex: 1 !important;
  max-height: none !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  min-height: 0 !important;
}
.form-label { color: var(--off) !important; font-size: 0.72rem !important; }
.form-card h3, .form-card .section-title { color: var(--white) !important; }
input[type="text"], input[type="number"], select, textarea {
  color: var(--white) !important;
  background: var(--card) !important;
}
input::placeholder { color: var(--dim) !important; }
.tl-btn { color: var(--off) !important; }
.split-btn { color: var(--off) !important; }
.day-pill { color: var(--off) !important; }
.tier-desc { color: var(--off) !important; }
.tier-name { color: var(--white) !important; }
.tier-tag { color: var(--off) !important; }


/* Form label brightness fixes */
.form-group label, .form-group > label { color: var(--off) !important; font-size: 0.72rem; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; margin-bottom: 6px; display: block; }
.form-section-label, .sf-label { color: var(--off) !important; }
.tl-btn, .split-btn, .day-pill { color: var(--off) !important; font-size: 0.85rem !important; }
.form-card p, .form-card span:not(.tier-badge) { color: var(--off) !important; }

/* ── AI COACH ── */
.coach-chat-container { display:flex; flex-direction:column; flex:1; min-height:0; background:var(--dark); border:1px solid var(--border); border-radius:14px; overflow:hidden; }
.coach-messages { flex:1; overflow-y:auto; padding:16px; display:flex; flex-direction:column; gap:10px; -webkit-overflow-scrolling:touch; min-height:0; }
.coach-starters { display:flex; flex-direction:column; align-items:center; justify-content:center; flex:1; gap:20px; padding:20px 0; }
.coach-welcome { text-align:center; }
.coach-welcome-icon { margin-bottom:12px; }
.coach-welcome-title { font-family:'Bebas Neue',sans-serif; font-size:1.4rem; letter-spacing:2px; color:var(--white); margin-bottom:6px; }
.coach-welcome-sub { font-size:0.82rem; color:var(--dim); }
.coach-starter-grid { display:grid; grid-template-columns:1fr 1fr; gap:10px; max-width:480px; width:100%; }
.coach-starter-btn { background:var(--card); border:1px solid var(--border2); border-radius:14px; padding:14px 16px; color:var(--off); font-size:0.8rem; text-align:left; cursor:pointer; transition:all 0.2s; line-height:1.4; }
.coach-starter-btn:hover { border-color:var(--green); color:var(--green); background:var(--green-dim); }
.coach-starter-btn:active { transform:scale(0.97); }
.coach-bubble { max-width:85%; padding:12px 16px; border-radius:18px; font-size:0.84rem; line-height:1.55; word-wrap:break-word; white-space:pre-wrap; }
.coach-bubble.user { align-self:flex-end; background:linear-gradient(135deg, #4ADE80, #22c55e); color:#0a0a0a; border-bottom-right-radius:4px; font-weight:500; }
.coach-bubble.assistant { align-self:flex-start; background:var(--card); color:var(--off); border:1px solid var(--border); border-bottom-left-radius:4px; }
.coach-bubble.assistant strong { color:var(--white); }
.coach-typing { align-self:flex-start; padding:12px 16px; background:var(--card); border:1px solid var(--border); border-radius:14px; border-bottom-left-radius:4px; display:flex; gap:4px; align-items:center; }
.coach-typing-dot { width:6px; height:6px; border-radius:50%; background:var(--dim); animation:pulse 1.2s ease-in-out infinite; }
.coach-typing-dot:nth-child(2) { animation-delay:0.2s; }
.coach-typing-dot:nth-child(3) { animation-delay:0.4s; }
.coach-input-bar { display:flex; align-items:center; gap:8px; padding:10px 12px; border-top:1px solid var(--border); background:#0d0d0d; flex-shrink:0; }
.coach-text-input { flex:1; background:var(--card); border:1px solid var(--border2); border-radius:22px; padding:11px 16px; color:var(--white); font-size:0.84rem; outline:none; font-family:inherit; }
.coach-text-input:focus { border-color:var(--green); box-shadow:0 0 0 1px rgba(74,222,128,0.15); }
.coach-text-input::placeholder { color:var(--dim); }
.coach-send-btn { width:40px; height:40px; border-radius:50%; border:none; background:var(--green); color:var(--black); cursor:pointer; display:flex; align-items:center; justify-content:center; transition:opacity 0.2s; flex-shrink:0; }
.coach-send-btn:hover { opacity:0.85; }
.coach-send-btn:disabled { opacity:0.3; cursor:not-allowed; }
@media(max-width:600px) {
  .coach-chat-container { flex:1; min-height:0; border-radius:0; border-left:none; border-right:none; }
  .coach-starter-grid { grid-template-columns:1fr; }
  .coach-bubble { max-width:90%; }
}
